<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIå‘³å„¿æ£€æµ‹å™¨ - AI Flavor Detector</title>
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/components.css">
    <link rel="stylesheet" href="../styles/github-badge.css">
    <link rel="stylesheet" href="../styles/report-generator.css">
</head>
<body>
    <!-- GitHub Badge -->
    <div class="github-badge" id="github-badge">
        <a href="https://github.com/ai-coding-labs/aiway" class="github-badge-content" target="_blank" rel="noopener noreferrer">
            <svg class="github-icon" viewBox="0 0 24 24">
                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
            <div class="github-stats">
                <div class="github-repo-name">aiway</div>
                <div class="github-star-count">
                    <svg class="star-icon" viewBox="0 0 24 24">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                    <span id="github-star-count" class="github-loading">åŠ è½½ä¸­...</span>
                </div>
            </div>
        </a>
        <div class="github-tooltip">
            ç‚¹å‡»è®¿é—®GitHubä»“åº“
        </div>
    </div>

    <div class="app-container">
        <!-- Header Section -->
        <header class="app-header">
            <div class="header-content">
                <h1 class="app-title">AIå‘³å„¿æ£€æµ‹å™¨</h1>
                <p class="app-subtitle">æ£€æµ‹ç½‘ç«™çš„AIè®¾è®¡é£æ ¼å¹¶è¿›è¡Œè¯„åˆ†</p>
            </div>
            <!-- Navigation Menu -->
            <nav class="app-navigation">
                <ul class="nav-menu">
                    <li class="nav-item">
                        <button class="nav-button active" data-page="detection">
                            <span class="nav-icon">ğŸ”</span>
                            <span class="nav-text">AIæ£€æµ‹</span>
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-button" data-page="records">
                            <span class="nav-icon">ğŸ“‹</span>
                            <span class="nav-text">æ£€æµ‹è®°å½•</span>
                        </button>
                    </li>
                </ul>
            </nav>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Detection Page -->
            <div id="detection-page" class="page active">
                <!-- Control Panel -->
        <section class="control-panel">
            <div class="url-input-section">
                <div class="input-group">
                    <label for="url-input" class="input-label">è¯·è¾“å…¥è¦æ£€æµ‹çš„ç½‘ç«™åœ°å€ï¼š</label>
                    <div class="input-container">
                        <input 
                            type="url" 
                            id="url-input" 
                            class="url-input" 
                            placeholder="ä¾‹å¦‚ï¼šhttps://example.com"
                            autocomplete="url"
                        >
                        <button id="load-btn" class="load-button" type="button">
                            <span class="button-text">åŠ è½½ç½‘ç«™</span>
                            <span class="loading-spinner" style="display: none;">âŸ³</span>
                        </button>
                    </div>
                </div>

                <!-- Example URLs Section -->
                <div class="example-urls-section">
                    <label class="example-urls-label">å¿«é€Ÿä½“éªŒç¤ºä¾‹ç½‘ç«™ï¼š</label>
                    <div class="example-urls-note">
                        <small>ğŸ’¡ æç¤ºï¼šæŸäº›ç½‘ç«™å¯èƒ½å› å®‰å…¨ç­–ç•¥æ— æ³•åœ¨é¢„è§ˆä¸­æ˜¾ç¤ºï¼Œä½†ä»å¯è¿›è¡ŒAIå‘³æ£€æµ‹åˆ†æ</small>
                    </div>
                    <div class="example-urls-container">
                        <button type="button" class="example-url-btn" data-url="https://www.51aigc.cc/#/login">
                            <span class="example-url-icon">ğŸ¤–</span>
                            <span class="example-url-text">51AIGC</span>
                        </button>
                        <button type="button" class="example-url-btn" data-url="https://chat.openai.com">
                            <span class="example-url-icon">ğŸ’¬</span>
                            <span class="example-url-text">ChatGPT</span>
                        </button>
                        <button type="button" class="example-url-btn" data-url="https://claude.ai">
                            <span class="example-url-icon">ğŸ§ </span>
                            <span class="example-url-text">Claude</span>
                        </button>
                        <button type="button" class="example-url-btn" data-url="https://www.midjourney.com">
                            <span class="example-url-icon">ğŸ¨</span>
                            <span class="example-url-text">Midjourney</span>
                        </button>
                        <button type="button" class="example-url-btn" data-url="https://stability.ai">
                            <span class="example-url-icon">ğŸ–¼ï¸</span>
                            <span class="example-url-text">Stability AI</span>
                        </button>
                        <button type="button" class="example-url-btn" data-url="https://www.notion.so">
                            <span class="example-url-icon">ğŸ“</span>
                            <span class="example-url-text">Notion</span>
                        </button>
                    </div>
                </div>

                <div class="settings-section">
                    <div class="setting-item">
                        <label class="setting-label">
                            <input type="checkbox" id="auto-analyze" class="setting-checkbox" checked>
                            <span class="setting-text">ç½‘ç«™åŠ è½½å®Œæˆåè‡ªåŠ¨è¿›è¡ŒAIå‘³æ£€æµ‹</span>
                        </label>
                    </div>
                </div>

                <div class="action-buttons">
                    <button id="analyze-btn" class="analyze-button" type="button" disabled>
                        <span class="button-text">å¼€å§‹æ£€æµ‹AIå‘³</span>
                        <span class="loading-spinner" style="display: none;">âŸ³</span>
                    </button>
                    <button id="clear-btn" class="clear-button" type="button">
                        æ¸…é™¤ç»“æœ
                    </button>
                </div>
            </div>

            <!-- Status Display -->
            <div class="status-section">
                <div id="status-message" class="status-message"></div>
                <div id="progress-bar" class="progress-bar" style="display: none;">
                    <div class="progress-fill"></div>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section class="results-section" id="results-section" style="display: none;">
            <div class="results-header">
                <h2>æ£€æµ‹ç»“æœ</h2>
                <div class="analyzed-url-info">
                    <span class="url-label">åˆ†æç½‘ç«™ï¼š</span>
                    <span id="analyzed-url" class="analyzed-url">-</span>
                </div>
                <div class="score-display">
                    <div class="score-circle">
                        <span id="ai-score" class="score-number">0</span>
                        <span class="score-label">AIå‘³è¯„åˆ†</span>
                    </div>
                </div>
            </div>

            <div class="results-content">
                <div class="features-detected">
                    <h3>æ£€æµ‹åˆ°çš„AIç‰¹å¾</h3>
                    <div id="features-list" class="features-list">
                        <!-- Features will be populated by JavaScript -->
                    </div>
                </div>

                <div class="analysis-details">
                    <h3>è¯¦ç»†åˆ†æ</h3>
                    <div id="analysis-details" class="details-content">
                        <!-- Analysis details will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Report Card Generator Section -->
                <div class="report-card-generator" id="report-card-generator" style="display: none;">
                    <div class="report-card-generator-header">
                        <h3 class="report-card-generator-title">
                            <svg class="card-icon" viewBox="0 0 24 24">
                                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                            </svg>
                            ç”Ÿæˆåˆ†äº«å¡ç‰‡
                        </h3>
                        <div class="card-options">
                            <div class="card-option">
                                <input type="checkbox" id="include-timestamp" checked>
                                <label for="include-timestamp">åŒ…å«æ—¶é—´</label>
                            </div>
                            <div class="card-option">
                                <select id="card-theme">
                                    <option value="gradient">æ¸å˜ä¸»é¢˜</option>
                                    <option value="light">æµ…è‰²ä¸»é¢˜</option>
                                    <option value="dark">æ·±è‰²ä¸»é¢˜</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <p class="report-card-generator-description">
                        ç”Ÿæˆç²¾ç¾çš„æ£€æµ‹ç»“æœå¡ç‰‡ï¼Œå¯ä»¥å¤åˆ¶åˆ°å‰ªåˆ‡æ¿åˆ†äº«ç»™æœ‹å‹
                    </p>
                    <div class="report-card-actions">
                        <button id="generate-card-btn" class="generate-card-btn">
                            <svg class="btn-icon" viewBox="0 0 24 24">
                                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                            </svg>
                            ç”Ÿæˆå¡ç‰‡
                        </button>
                        <button id="copy-card-btn" class="copy-card-btn" disabled>
                            <svg class="btn-icon" viewBox="0 0 24 24">
                                <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                            </svg>
                            å¤åˆ¶åˆ°å‰ªåˆ‡æ¿
                        </button>
                    </div>

                    <!-- Card Preview -->
                    <div class="report-card-preview" id="report-card-preview">
                        <div class="report-card-preview-header">
                            <h4 class="report-card-preview-title">å¡ç‰‡é¢„è§ˆ</h4>
                            <div class="report-card-preview-actions">
                                <button class="card-preview-action-btn" id="download-card-btn" title="ä¸‹è½½å›¾ç‰‡">
                                    <svg viewBox="0 0 24 24" width="16" height="16">
                                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                    </svg>
                                </button>
                                <button class="card-preview-action-btn" id="fullscreen-card-btn" title="å…¨å±æŸ¥çœ‹">
                                    <svg viewBox="0 0 24 24" width="16" height="16">
                                        <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="report-card-canvas-container" id="report-card-canvas-container">
                            <div class="card-loading" id="card-loading" style="display: none;">
                                <div class="card-loading-spinner"></div>
                                <div class="card-loading-text">æ­£åœ¨ç”Ÿæˆå¡ç‰‡...</div>
                            </div>
                        </div>
                    </div>

                    <!-- Success Message -->
                    <div class="card-success-message" id="card-success-message">
                        <svg class="card-success-icon" viewBox="0 0 24 24">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        <span id="card-success-text">å¡ç‰‡å·²å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Website Preview Area -->
        <section class="preview-section" id="preview-section" style="display: flex;">
            <div class="preview-header">
                <h3>ç½‘ç«™é¢„è§ˆ</h3>
                <div class="preview-controls">
                    <button id="refresh-preview" class="control-button">åˆ·æ–°</button>
                    <button id="toggle-preview" class="control-button">éšè—é¢„è§ˆ</button>
                </div>
            </div>
            <div class="preview-container">
                <webview id="website-webview"
                         class="website-webview"
                         src="about:blank"
                         nodeintegration="false"
                         disablewebsecurity="true"
                         allowpopups="true"
                         useragent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
                         partition="persist:webview"
                         style="width: 100%; height: 600px;">
                </webview>

                <div id="preview-placeholder" class="preview-placeholder" style="display: none;">
                    ç½‘ç«™å°†åœ¨æ­¤å¤„æ˜¾ç¤º...
                </div>
            </div>
        </section>
            </div>

            <!-- Records Page -->
            <div id="records-page" class="page">
                <div class="records-container">
                    <div class="records-header">
                        <h2>æ£€æµ‹è®°å½•</h2>
                        <div class="records-controls">
                            <div class="search-container">
                                <input type="text" id="search-input" class="search-input" placeholder="æœç´¢ç½‘ç«™æˆ–å…³é”®è¯...">
                                <button id="search-btn" class="search-button">ğŸ”</button>
                            </div>
                            <div class="filter-container">
                                <select id="score-filter" class="filter-select">
                                    <option value="">æ‰€æœ‰è¯„åˆ†</option>
                                    <option value="0-30">ä½AIå‘³ (0-30åˆ†)</option>
                                    <option value="31-69">ä¸­ç­‰AIå‘³ (31-69åˆ†)</option>
                                    <option value="70-100">é«˜AIå‘³ (70-100åˆ†)</option>
                                </select>
                            </div>
                            <button id="clear-all-records" class="danger-button">æ¸…ç©ºæ‰€æœ‰è®°å½•</button>
                        </div>
                    </div>

                    <div class="records-stats">
                        <div class="stat-item">
                            <span class="stat-label">æ€»è®°å½•æ•°:</span>
                            <span id="total-records" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">å¹³å‡AIè¯„åˆ†:</span>
                            <span id="average-score" class="stat-value">0</span>
                        </div>
                    </div>

                    <div class="records-list" id="records-list">
                        <div class="loading-placeholder" id="records-loading">
                            æ­£åœ¨åŠ è½½è®°å½•...
                        </div>
                        <div class="empty-placeholder" id="records-empty" style="display: none;">
                            <div class="empty-icon">ğŸ“‹</div>
                            <h3>æš‚æ— æ£€æµ‹è®°å½•</h3>
                            <p>å¼€å§‹æ£€æµ‹ç½‘ç«™ä»¥åˆ›å»ºæ‚¨çš„ç¬¬ä¸€æ¡è®°å½•</p>
                            <button class="primary-button" onclick="switchToPage('detection')">å¼€å§‹æ£€æµ‹</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Record Detail Page -->
            <div id="record-detail-page" class="page">
                <div class="record-detail-container">
                    <div class="detail-header">
                        <button id="back-to-records" class="back-button">â† è¿”å›è®°å½•åˆ—è¡¨</button>
                        <div class="detail-actions">
                            <button id="delete-current-record" class="danger-button">åˆ é™¤è®°å½•</button>
                        </div>
                    </div>

                    <div class="detail-content" id="record-detail-content">
                        <!-- Record detail content will be loaded here -->
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <div class="footer-content">
                <p class="footer-text">AIå‘³å„¿æ£€æµ‹å™¨ - åŸºäºè§†è§‰ç‰¹å¾çš„AIè®¾è®¡é£æ ¼è¯†åˆ«å·¥å…·</p>
                <div class="footer-links">
                    <a href="https://github.com/ai-coding-labs/aiway" class="footer-github-link" target="_blank" rel="noopener noreferrer">
                        <svg class="footer-github-icon" viewBox="0 0 24 24">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        æŸ¥çœ‹æºç 
                    </a>
                    <span class="version-info">v1.0.0</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Error Modal -->
    <div id="error-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>é”™è¯¯æç¤º</h3>
                <button class="modal-close" id="close-error-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="error-message"></p>
            </div>
            <div class="modal-footer">
                <button class="modal-button" id="error-ok-btn">ç¡®å®š</button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="success-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ“ä½œæˆåŠŸ</h3>
                <button class="modal-close" id="close-success-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="success-message"></p>
            </div>
            <div class="modal-footer">
                <button class="modal-button" id="success-ok-btn">ç¡®å®š</button>
            </div>
        </div>
    </div>

    <script>
        console.log('HTML script loaded');
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM loaded');

            // è®¾ç½®å¿«é€Ÿä½“éªŒæŒ‰é’®
            const exampleUrlButtons = document.querySelectorAll('.example-url-btn');
            console.log('Found example buttons:', exampleUrlButtons.length);
            exampleUrlButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const url = button.getAttribute('data-url');
                    console.log('Example button clicked, URL:', url);
                    if (url) {
                        const urlInput = document.getElementById('url-input');
                        urlInput.value = url;
                        console.log('URL set to input:', url);

                        // æ˜¾ç¤ºçŠ¶æ€æ¶ˆæ¯
                        const statusMsg = document.getElementById('status-message');
                        if (statusMsg) {
                            statusMsg.textContent = 'æ­£åœ¨è‡ªåŠ¨åŠ è½½ç½‘ç«™...';
                            statusMsg.className = 'status-message loading';
                        }

                        // æ·»åŠ è§†è§‰åé¦ˆ
                        button.classList.add('clicked');
                        setTimeout(() => {
                            button.classList.remove('clicked');
                        }, 200);

                        // è‡ªåŠ¨åŠ è½½ç½‘ç«™
                        setTimeout(() => {
                            console.log('Auto-loading website after example button click');
                            loadWebsiteAndDetect(url);
                        }, 500);
                    }
                });
            });

            const loadBtn = document.getElementById('load-btn');
            console.log('Load button found:', loadBtn);
            if (loadBtn) {
                loadBtn.addEventListener('click', () => {
                    console.log('Load button clicked directly');
                    const urlInput = document.getElementById('url-input');
                    const url = urlInput.value.trim();
                    console.log('URL to load:', url);

                    if (url) {
                        loadWebsiteAndDetect(url);
                    } else {
                        const statusMsg = document.getElementById('status-message');
                        if (statusMsg) {
                            statusMsg.textContent = 'è¯·è¾“å…¥ç½‘ç«™åœ°å€';
                            statusMsg.className = 'status-message error';
                        }
                    }
                });
            }

            // è®¾ç½®åˆ†ææŒ‰é’®äº‹ä»¶
            const analyzeBtn = document.getElementById('analyze-btn');
            if (analyzeBtn) {
                analyzeBtn.addEventListener('click', () => {
                    console.log('Analyze button clicked manually');
                    startAIFlavorDetection();
                });
            }
        });

        // åŠ è½½ç½‘ç«™å¹¶æ£€æµ‹å‡½æ•°
        function loadWebsiteAndDetect(url) {
            console.log('Loading website and detecting:', url);
            const statusMsg = document.getElementById('status-message');
            const webview = document.getElementById('website-webview');

            if (statusMsg) {
                statusMsg.textContent = 'æ­£åœ¨åŠ è½½ç½‘ç«™...';
                statusMsg.className = 'status-message loading';
            }

            if (webview && url) {
                console.log('Setting webview src to:', url);
                webview.src = url;

                // å¯ç”¨åˆ†ææŒ‰é’®å¹¶è‡ªåŠ¨å¼€å§‹æ£€æµ‹
                const analyzeBtn = document.getElementById('analyze-btn');
                if (analyzeBtn) {
                    setTimeout(() => {
                        analyzeBtn.disabled = false;
                        if (statusMsg) {
                            statusMsg.textContent = 'ç½‘ç«™åŠ è½½å®Œæˆï¼Œæ­£åœ¨è‡ªåŠ¨æ£€æµ‹AIå‘³...';
                            statusMsg.className = 'status-message loading';
                        }

                        // è‡ªåŠ¨å¼€å§‹AIå‘³æ£€æµ‹
                        setTimeout(() => {
                            console.log('Starting automatic AI flavor detection...');
                            startAIFlavorDetection();
                        }, 1000);
                    }, 3000);
                }
            }
        }

        // AIå‘³æ£€æµ‹å‡½æ•°
        function startAIFlavorDetection() {
            console.log('Starting AI flavor detection...');
            const statusMsg = document.getElementById('status-message');
            const resultsSection = document.getElementById('results-section');
            const webview = document.getElementById('website-webview');

            if (statusMsg) {
                statusMsg.textContent = 'æ­£åœ¨åˆ†æç½‘ç«™çš„AIå‘³...';
                statusMsg.className = 'status-message loading';
            }

            // æ¨¡æ‹ŸAIæ£€æµ‹è¿‡ç¨‹
            setTimeout(() => {
                console.log('AI detection completed');

                // è·å–ç½‘ç«™ä¿¡æ¯
                const urlInput = document.getElementById('url-input');
                const currentUrl = urlInput.value || 'Unknown';
                let websiteTitle = 'Unknown Website';

                try {
                    if (webview && webview.getTitle) {
                        websiteTitle = webview.getTitle() || currentUrl;
                    }
                } catch (e) {
                    console.log('Could not get webview title:', e);
                }

                // ç”Ÿæˆæ¨¡æ‹Ÿçš„æ£€æµ‹ç»“æœ
                const mockResult = generateMockAIFlavorResult(currentUrl, websiteTitle);

                // æ˜¾ç¤ºç»“æœ
                displayAIFlavorResults(mockResult);

                if (statusMsg) {
                    statusMsg.textContent = 'AIå‘³æ£€æµ‹å®Œæˆ';
                    statusMsg.className = 'status-message success';
                }

                // æ˜¾ç¤ºç»“æœåŒºåŸŸ
                if (resultsSection) {
                    resultsSection.style.display = 'block';
                }
            }, 3000);
        }

        // ç”Ÿæˆæ¨¡æ‹Ÿæ£€æµ‹ç»“æœ
        function generateMockAIFlavorResult(url, title) {
            const aiFeatures = [
                { name: 'æ¸å˜èƒŒæ™¯', detected: Math.random() > 0.3, confidence: 'high', score: 85 },
                { name: 'åœ†è§’è®¾è®¡', detected: Math.random() > 0.4, confidence: 'medium', score: 72 },
                { name: 'å¡ç‰‡å¸ƒå±€', detected: Math.random() > 0.2, confidence: 'high', score: 90 },
                { name: 'æç®€é£æ ¼', detected: Math.random() > 0.3, confidence: 'medium', score: 68 },
                { name: 'å¤§å­—ä½“æ ‡é¢˜', detected: Math.random() > 0.5, confidence: 'low', score: 45 },
                { name: 'å±…ä¸­å¯¹é½', detected: Math.random() > 0.4, confidence: 'medium', score: 75 }
            ];

            const detectedFeatures = aiFeatures.filter(f => f.detected);
            const avgScore = detectedFeatures.length > 0
                ? Math.round(detectedFeatures.reduce((sum, f) => sum + f.score, 0) / detectedFeatures.length)
                : Math.round(Math.random() * 40 + 20);

            return {
                url: url,
                title: title,
                score: avgScore,
                features: aiFeatures,
                timestamp: new Date(),
                details: `æ£€æµ‹åˆ° ${detectedFeatures.length} ä¸ªAIè®¾è®¡ç‰¹å¾`
            };
        }

        // æ˜¾ç¤ºæ£€æµ‹ç»“æœ
        function displayAIFlavorResults(result) {
            console.log('Displaying results:', result);

            // æ›´æ–°åˆ†æçš„URL
            const analyzedUrl = document.getElementById('analyzed-url');
            if (analyzedUrl) {
                analyzedUrl.textContent = result.url;
            }

            // æ›´æ–°AIè¯„åˆ†
            const aiScore = document.getElementById('ai-score');
            if (aiScore) {
                aiScore.textContent = result.score;
            }

            // æ›´æ–°ç‰¹å¾åˆ—è¡¨
            const featuresList = document.getElementById('features-list');
            if (featuresList) {
                featuresList.innerHTML = '';
                result.features.forEach(feature => {
                    if (feature.detected) {
                        const featureItem = document.createElement('div');
                        featureItem.className = 'feature-item detected';
                        featureItem.innerHTML = `
                            <span class="feature-name">${feature.name}</span>
                            <span class="feature-confidence ${feature.confidence}">${feature.confidence}</span>
                            <span class="feature-score">${feature.score}åˆ†</span>
                        `;
                        featuresList.appendChild(featureItem);
                    }
                });
            }

            // æ›´æ–°è¯¦ç»†åˆ†æ
            const analysisDetails = document.getElementById('analysis-details');
            if (analysisDetails) {
                analysisDetails.innerHTML = `
                    <p>æ£€æµ‹æ—¶é—´: ${result.timestamp.toLocaleString()}</p>
                    <p>æ£€æµ‹ç»“æœ: ${result.details}</p>
                    <p>AIå‘³è¯„åˆ†: ${result.score}/100</p>
                `;
            }
        }
    </script>
    <script src="renderer.js"></script>
</body>
</html>
